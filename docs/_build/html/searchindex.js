Search.setIndex({"docnames": ["index", "pages/calibration-package", "pages/control-algorithm", "pages/forward-kinematics", "pages/gripper-experiment", "pages/hardware-gripper", "pages/hub-motor-and-driver", "pages/hub-motor-interface", "pages/imu-interface", "pages/imu-sensor", "pages/inverse-kinematics", "pages/microcontroller", "pages/process-timing", "pages/ros2-interface", "pages/ros2-setup", "pages/step-to-open", "pages/summary", "pages/wheel-odometry", "pages/wheel-odometry-computation", "pages/wheel-velocity-estimation", "pages/xicro-package"], "filenames": ["index.rst", "pages/calibration-package.rst", "pages/control-algorithm.rst", "pages/forward-kinematics.rst", "pages/gripper-experiment.rst", "pages/hardware-gripper.rst", "pages/hub-motor-and-driver.rst", "pages/hub-motor-interface.rst", "pages/imu-interface.rst", "pages/imu-sensor.rst", "pages/inverse-kinematics.rst", "pages/microcontroller.rst", "pages/process-timing.rst", "pages/ros2-interface.rst", "pages/ros2-setup.rst", "pages/step-to-open.rst", "pages/summary.rst", "pages/wheel-odometry.rst", "pages/wheel-odometry-computation.rst", "pages/wheel-velocity-estimation.rst", "pages/xicro-package.rst"], "titles": ["MBSE-2022-1/Firmware-Team Documentation", "Calibration Package", "Control Algorithms", "Forward Kinematics", "Gripper", "Hardware Gripper", "Hub Motor and Driver", "Hub Motor Interface", "IMU Interface", "IMU Sensor", "Inverse Kinematics", "Microcontroller", "Process Timing", "ROS2 Interface", "ROS2 Setup", "Steps to open ROS2 nodes", "Firmware Summary", "Wheel Odometry", "Wheel Odometry Computation", "Wheel Velocity Estimation", "Xicro Package"], "terms": {"index": [], "modul": [], "search": [], "page": [], "hardwar": [0, 20], "us": [0, 2, 4, 5, 6, 7, 8, 9, 11, 16, 17, 20], "The": [0, 2, 4, 7, 9, 14, 16, 20], "firmwar": [2, 6, 14], "team": [2, 5, 6, 14], "i": [0, 1, 2, 4, 5, 6, 7, 9, 10, 11, 14, 16, 20], "hubmotor": [], "imu": [0, 1, 12, 13, 20], "sensor": [0, 5, 20], "refer": [5, 9], "sourc": [0, 14], "code": [0, 8, 20], "http": [0, 2, 5, 8, 9, 14], "github": [0, 2, 8], "com": [0, 2, 5, 8, 9, 14], "follow": [2, 5, 8, 9, 14, 20], "thi": [2, 4, 6, 9, 11, 14, 16, 20], "link": 5, "get": [1, 2, 7, 16, 19], "document": 20, "hello": [], "world": [], "dummi": [], "2": [0, 5, 6, 7, 9, 10, 12, 13, 17, 20], "bruh": [], "just": 20, "kei": 2, "goal": 2, "option": 8, "sub1": [], "sub2": [], "sub3": [], "firm": [], "ware": [], "1": [1, 2, 4, 5, 7, 9, 12, 13, 16, 17, 19, 20], "3": [7, 8, 17, 19, 20], "5": [1, 2, 3, 4, 7, 10, 17, 18, 20], "6": [7, 17], "7": [7, 8, 12, 16, 17, 20], "stm32": [8, 20], "imag": [], "here": [6, 7], "jpg": [], "same": [11, 20], "shown": [], "void": [3, 7, 10, 18, 19], "main": [8, 11, 17], "return": [1, 2, 16, 19], "0": [0, 1, 2, 3, 7, 10, 12, 13, 16, 18, 19, 20], "platform": [], "self": [1, 20], "contain": [], "cost": [], "flexibl": [], "raspberri": [], "pi": 6, "No": [], "30": [2, 17], "limitless": [], "www": [], "st": [], "en": [2, 5], "microcontrol": 0, "microprocessor": [], "32": [2, 7], "bit": [7, 16], "arm": [], "cortex": [], "mcu": [11, 16], "html": [], "custom": 16, "go": 14, "hub": [0, 11, 17], "motor": [0, 10, 11, 17], "driver": [0, 11, 16], "inerti": 9, "measur": [0, 5, 9, 17, 20], "unit": 10, "ros2": [0, 8, 11, 20], "packag": 0, "manipul": [2, 9], "mobil": [6, 9, 16, 20], "robot": [6, 9, 14, 16, 17, 20], "zltech": 6, "": [0, 1, 2, 4, 6, 7, 9, 10, 14, 16, 19, 20], "provid": [2, 5, 6], "aj": 6, "both": [6, 11, 16, 17], "wheel": [0, 1, 6, 12, 20], "type": [6, 14, 20], "product": 6, "name": [2, 6, 14], "zllg65asm250": [], "4096": [], "v2": [], "zlac706": [7, 11], "can": [0, 2, 4, 5, 8, 9, 11, 14, 16, 17], "servo": 6, "an": [0, 2, 5, 6, 8, 9, 16, 20], "built": 6, "encod": [6, 16, 19], "special": 6, "design": 6, "applic": 6, "also": [6, 7, 20], "power": [5, 6], "24": [2, 6, 7, 17], "48": [6, 17], "vdc": 6, "some": [4, 6, 11], "specif": 6, "commun": [0, 2, 6, 11, 14], "protocol": [2, 6], "system": [1, 2, 11, 14, 17], "architectur": 14, "connect": [0, 2, 5, 14], "pinout": [], "interfac": [0, 2, 5, 17], "veloc": [0, 9, 17, 20], "estim": [0, 11, 17], "forward": [0, 7, 17], "kinemat": [0, 11, 17], "invers": [0, 19], "odematri": 0, "comput": [0, 17], "algorithm": [5, 9], "subsystem": 0, "instal": [0, 11], "calibr": [0, 20], "xicro": [0, 13, 16], "setup": [0, 11], "port": [0, 2, 5, 7, 20], "check": [0, 2, 5, 8, 11, 16], "step": [0, 8], "open": [0, 1, 2, 20], "node": [0, 1, 7, 14], "odometri": [0, 1, 12, 13, 20], "accord": [4, 5, 8, 11, 16], "simplest": 11, "wai": 11, "control": [0, 5, 7, 11, 17, 20], "speed": [0, 2, 4, 6, 7, 9, 10, 11, 16], "achiev": [11, 16], "posit": [0, 2, 4, 5, 7, 11, 16, 17, 19, 20], "feedback": [1, 11], "state": [11, 19], "area": 11, "network": 11, "bu": [11, 14, 16], "which": [2, 11, 16], "differ": [2, 4, 11], "from": [0, 2, 4, 5, 7, 8, 11, 16, 17, 20], "normal": 11, "singl": 11, "end": 11, "like": [9, 11], "i2c": [8, 11], "spi": 11, "becaus": [2, 5, 11, 16], "its": [0, 4, 9, 11], "logic": 11, "level": [11, 17], "addit": [7, 11], "perform": [7, 9, 11, 14], "perfect": 11, "make": [0, 11, 16, 20], "method": [2, 7, 11], "unpopular": 11, "gener": [8, 11, 20], "purpos": 11, "f411re": [], "stm32f411re": 11, "But": [4, 11], "high": [11, 17], "famili": 11, "stm32h745zi": 7, "dual": 11, "core": [11, 12], "ha": [2, 4, 5, 9, 11, 16], "peripher": [8, 11], "call": [11, 16], "fdcan": 11, "so": [7, 11, 14, 16, 20], "we": [2, 5, 7, 8, 9, 11, 14], "decid": 11, "our": [2, 5, 11], "all": [8, 11, 16, 20], "featur": [6, 11], "need": [2, 7, 8, 9, 11, 14, 16, 20], "easi": [5, 11], "priorit": 11, "task": 11, "In": [2, 4, 5, 9, 14, 20], "process": [1, 9, 16, 17], "local": 9, "current": [0, 2, 4, 6, 7, 9, 16, 17], "linear": [0, 9, 20], "acceler": [7, 9, 20], "angular": [9, 20], "velocti": 9, "orient": [9, 20], "re": 9, "absolut": [1, 2, 9], "9": [9, 17], "dof": 9, "includ": [7, 8, 9, 16, 20], "acceleromet": 9, "gyroscop": 9, "magnetomet": 9, "own": 9, "processor": 9, "fusion": 9, "thei": 9, "blend": 9, "data": [0, 1, 2, 5, 7, 8, 9, 11, 12, 16, 20], "stabl": 9, "three": 9, "axi": 9, "output": [1, 6, 7, 9, 14], "euler": 9, "vector": 9, "100hz": 9, "base": [7, 9, 20], "360": 9, "sphere": 9, "quaterion": 9, "magnet": 9, "field": 9, "strength": 9, "20hz": 9, "graviti": 9, "temperatur": 9, "1hz": 9, "four": 9, "point": [4, 9, 20], "quaternion": [9, 20], "more": [0, 2, 7, 9, 11, 16], "accur": [9, 16], "rotat": [2, 9], "rad": 9, "motion": 9, "m": [0, 3, 7, 8, 9, 10, 12, 13, 16, 18, 19], "sens": 9, "micro": [3, 7, 8, 9, 10, 18, 19, 20], "tesla": 9, "ut": 9, "minu": 9, "gravit": 9, "ani": [2, 4, 9], "movement": [9, 14], "ambient": 9, "degre": [9, 16], "celsiu": 9, "learn": 9, "adafruit": 9, "overview": 9, "safe": 0, "navig": [0, 14], "indoor": 0, "obstacl": 0, "avoid": 0, "must": [0, 7], "automat": [0, 14], "move": [0, 2, 4, 17], "specifi": [0, 8], "user": 0, "calcul": [0, 7, 11, 17], "pose": [0, 4, 16, 20], "surround": 0, "have": [0, 2, 5, 11, 16], "manual": [0, 2, 17], "quick": 0, "reposit": 0, "abl": [0, 16], "between": [0, 2, 14, 20], "twist": [0, 16, 20], "than": [0, 2, 5, 7, 11, 16], "1335": 0, "teleop": 0, "keyboard": 0, "send": [0, 8, 16, 20], "command": [0, 7, 14, 16, 20], "desir": 0, "raw": [0, 8, 20], "devic": [0, 2, 7, 11], "implement": [0, 5, 7, 16], "frequenc": [0, 12, 16], "greater": 0, "equal": 0, "20": [0, 2, 4, 17], "hz": [0, 12, 16], "pick": [0, 2, 4, 5], "up": [0, 4, 5, 6, 11, 16], "item": 0, "without": [0, 2, 4], "drop": 0, "them": [0, 2], "close": [0, 2, 4], "appli": [0, 4], "forc": [0, 2, 16], "properli": 0, "object": [0, 2, 16], "present": [0, 2, 4, 5, 16], "load": [0, 2, 4, 5, 16, 20], "dynamixel": [0, 4, 16], "releas": [0, 7], "avail": [2, 11], "Being": 11, "manag": [2, 11], "separ": 11, "each": [11, 16, 20], "order": [5, 11, 14, 20], "reduc": [11, 16], "overal": 11, "runtim": [11, 12, 16], "unrel": 11, "m7": [11, 12], "matrix": [11, 16], "m4": [11, 12], "deliv": 11, "one": 11, "anoth": 11, "malfunct": 11, "number": [1, 11, 16], "develop": [2, 11, 20], "board": [5, 8, 11, 16], "immedi": 11, "basic": 6, "agv": 6, "48vdc": 6, "350": 6, "w": [1, 6, 8, 20], "rate": [1, 6, 12, 20], "200": [2, 6, 16], "rpm": [2, 4, 6, 10, 16], "torqu": [2, 4, 5, 6], "8": [6, 7, 12, 17], "nm": 6, "max": 6, "capac": 6, "150": 6, "kg": 6, "brake": [6, 7], "electr": 6, "low": [6, 17], "voltag": [5, 6, 16], "60vdc": 6, "400": 6, "averag": 6, "8a": 6, "peak": 6, "24a": 6, "1000": [6, 7], "rs232": 6, "softwar": 6, "paramet": 6, "set": [2, 6, 7, 8, 20], "pictur": [2, 8], "assumpt": 19, "zero": 19, "mean": [1, 2, 19, 20], "gaussian": 19, "jerk": 19, "predict_rightwheel": 19, "x_r": 19, "A": [4, 5, 16, 19], "b": 19, "u": 19, "p_r": 19, "transpos": 19, "g": 19, "q_r": 19, "float": [3, 7, 10, 18, 19], "usercodeupdaterightwheel": 19, "y_r": 19, "assign": [19, 20], "valu": [2, 4, 7, 8, 16, 17, 19, 20], "k_r": 19, "c": [8, 19], "r_r": 19, "new": [19, 20], "x": [1, 7, 8, 19, 20], "matrixxf": 19, "ident": 19, "predict_leftwheel": 19, "x_l": 19, "p_l": 19, "q_l": 19, "usercodeupdateleftwheel": 19, "y_l": 19, "k_l": 19, "r_l": 19, "runstarttim": [3, 7, 8, 10, 18, 19], "pulse2posit": 19, "estimated_rightvel": [3, 19], "update_rightwheel": 19, "right_degrel": 19, "right_degsec": 19, "m_pi": [10, 19], "180": [4, 19], "085": [10, 19], "degsec": 19, "estimated_leftvel": [3, 19], "update_leftwheel": 19, "left_degrel": 19, "left_degsec": 19, "059": [12, 19], "forwardkinemat": 3, "right_linvel": 3, "left_linvel": 3, "wheel_dist": [3, 10], "robot_linvel": [3, 13, 18], "robot_angvel": [3, 13, 18], "39377": [3, 10], "003": [3, 12], "inversekinemat": 10, "cmd_linvel": 10, "cmd_angvel": 10, "wheel_radiu": 10, "right_spe": 10, "left_spe": 10, "rightmotor_cmdvel": [7, 10], "60": [4, 10, 17], "leftmotor_cmdvel": [7, 10], "satur": 10, "too": 10, "much": [10, 16], "uint8_t": [7, 10], "sat_valu": 10, "15": [10, 16, 17], "fab": [7, 10], "els": [2, 7, 10], "cmd_vel_linear": [10, 13], "cmd_vel_angular": [10, 13], "004": [10, 12], "wheelodometri": 18, "linear_veloc": 18, "angular_veloc": [1, 18, 20], "time_step": 18, "temp_tetra": 18, "robot_yaw": 18, "robot_x": [13, 18], "co": 18, "robot_i": [13, 18], "sin": 18, "timestep": 18, "006": [12, 18], "xicro_begin": 13, "huart3": 13, "while": [7, 13], "xicro_spin_nod": 13, "shared_ptr": 13, "xicro_get_linvel": 13, "xicro_get_angvel": 13, "nav_pub_flag": 13, "xicro_publish_nav": 13, "robot_qx": 13, "robot_qi": 13, "robot_qz": 13, "robot_qw": 13, "imu_pub_flag": 13, "xicro_publish_imu": 13, "imu_qx": 13, "imu_qi": 13, "imu_qz": 13, "imu_qw": 13, "imu_gx": 13, "imu_gi": 13, "imu_gz": 13, "imu_ax": 13, "imu_ai": 13, "imu_az": 13, "xicro_interfac": [1, 16, 20], "vector3": 20, "linear_acceler": [1, 20], "float32": 20, "msg": [1, 20], "block": [], "diffdrivetwist": [16, 20], "idmcu": 20, "namespac": 20, "sub_n_pub": 20, "dev": [2, 20], "ttyacm0": [14, 20], "generate_library_path": 20, "baudrat": [2, 7, 20], "576000": 20, "setup_publish": 20, "nav_stm32": 20, "imu_stm32": [1, 20], "setup_subscrib": 20, "cmd_vel_stm32": 20, "setup_srv_cli": 20, "transmiss": [16, 20], "100": [1, 2, 4, 12, 16], "run": [14, 15, 20], "xicro_pkg": [14, 15, 20], "generate_librari": 20, "py": [2, 14, 15, 20], "stm32h7xx_hal": 20, "h": [8, 20], "generate_xicro_nod": 20, "after": [2, 14, 16, 17, 20], "vscode": 20, "displai": [16, 20], "wa": [16, 17, 20], "delet": [8, 20], "line": [8, 20], "11": [17, 20], "verifi": 20, "save": 20, "entri": 20, "add": 20, "auto": [7, 20], "topic": [1, 12, 17, 20], "sensor_msg": [1, 16, 20], "nav_msg": [1, 16, 20], "subscrib": 20, "cmd_vel": 20, "geometry_msg": [16, 20], "file": [1, 8, 14, 20], "config": [1, 20], "sensor_properti": [1, 20], "calibration_gen_path": 20, "get_package_share_directori": [1, 20], "path": [1, 2, 20], "o": [1, 20], "join": [1, 20], "f": [1, 20], "properti": [14, 20], "loader": 20, "unsafeload": 20, "print": [2, 20], "share": 20, "success": 20, "lin_acc_x_bia": 20, "lin_acc_y_bia": 20, "lin_acc_z_bia": 20, "ang_vel_x_bia": 20, "ang_vel_y_bia": 20, "4": [2, 5, 7, 8, 12, 17, 20], "ang_vel_z_bia": 20, "varianc": 20, "lin_acc_x_var": 20, "covari": [1, 16, 20], "lin_acc_y_var": 20, "lin_acc_z_var": 20, "14": [17, 20], "ang_vel_x_var": 20, "21": [17, 20], "ang_vel_y_var": 20, "28": [17, 20], "ang_vel_z_var": 20, "35": [17, 20], "def": [1, 2, 20], "callback_imu_stm32": 20, "intern": [7, 20], "imu_orient": 20, "imu_angular_veloc": 20, "imu_linear_acceler": 20, "imu_msg": 20, "header": 20, "frame_id": 20, "base_footprint": 20, "now": [5, 14, 20], "get_clock": 20, "stamp": 20, "to_msg": 20, "y": [1, 8, 20], "z": [1, 8, 14, 20], "linear_acceleration_covari": 20, "angular_velocity_covari": 20, "orientation_covari": 20, "000000001": 20, "imu_publish": 20, "callback_nav_stm32": 20, "odom": 20, "robot_pos": 20, "robot_twist": 20, "odom_msg": 20, "child_frame_id": 20, "posewithcovari": 20, "twistwithcovari": 20, "00477649365": 20, "0530721471": 20, "wheel_odometry_publish": 20, "cmd_vel_callback": 20, "robot_cmd_vel": 20, "twist_msg": 20, "robot_twist_publish": 20, "pip3": 14, "uninstal": 14, "serial": [2, 14], "pyseri": 14, "numpi": 14, "relat": 14, "first": [2, 4, 14], "via": [14, 20], "termin": [2, 14], "branch": 14, "your": [2, 14, 20], "workspac": [], "src": [8, 14], "directori": [14, 20], "git": 14, "mbse": [2, 14], "2022": [2, 14], "tree": 14, "chmod": 14, "777": 14, "you": [2, 14, 20], "bash": 14, "write": [14, 16, 20], "bashrc": 14, "everi": [2, 14], "time": [2, 7, 14, 17], "xxx": 14, "usb": 5, "bin": 14, "sysdevpath": 14, "sy": 14, "do": [2, 14], "syspath": 14, "devnam": 14, "udevadm": 14, "info": [1, 14], "q": [14, 16], "p": 14, "exit": 14, "eval": 14, "export": 14, "id_seri": 14, "echo": 14, "done": 14, "see": [2, 14], "stlink": 14, "when": [2, 4, 14, 16, 20], "otherwis": 14, "sudo": 14, "chown": 14, "usernam": 14, "requir": [14, 16], "integr": [14, 17], "aim": 14, "messag": [7, 14, 16], "bring": [14, 20], "thing": [5, 14], "origin": 20, "made": 20, "replac": [16, 20], "ro": 20, "allow": 20, "well": [16, 20], "intrepret": 20, "inform": [4, 16, 20], "uart": 20, "transmit": [16, 20], "below": [2, 4, 8, 20], "highest": 20, "declar": [7, 20], "mcuport": [], "cpp": 20, "project": [8, 20], "nativ": 20, "It": [2, 5, 20], "These": [2, 7, 20], "ar": [2, 4, 5, 7, 8, 16, 20], "nav_msg_publish": [15, 20], "script": 20, "receiv": [7, 20], "standard": [16, 20], "fill": 20, "extract": [16, 20], "onli": [5, 7, 16, 20], "sent": [7, 20], "publish": 1, "sampl": [1, 12], "500": [1, 7, 15, 16, 17], "action": [1, 15], "yaml": 1, "durat": 1, "per": 1, "10": [1, 4, 7, 16, 17], "class": 1, "__init__": 1, "action_serv": 1, "super": 1, "calibration_subscrib": 1, "sensor_sub": 1, "create_subscript": 1, "sensor_callback": 1, "isen": 1, "fals": [1, 2], "counter": 1, "num_sampl": 1, "temp": 1, "sensor_data": 1, "calibrationactionserv": 1, "calibration_serv": 1, "create_r": 1, "actionserv": 1, "execute_callback": 1, "float64multiarrai": 1, "collected_data": 1, "goal_handl": 1, "get_logg": 1, "execut": 1, "feedback_msg": 1, "num": [1, 15], "request": [1, 7], "rang": [1, 2, 4, 7, 16], "append": 1, "publish_feedback": 1, "sleep": 1, "result": [1, 4, 16], "succe": 1, "data_arrai": 1, "np": 1, "arrai": [1, 16], "distanc": [1, 17], "tolist": 1, "shape": 1, "cov": 1, "t": [1, 4, 5], "reshap": 1, "calibration_path": 1, "dump": 1, "gedit": 1, "xicro_node_sub_n_pub_id_3_stm32": 15, "calibration_nod": 15, "send_goal": 15, "calibration_interfac": 15, "teleop_twist_keyboard": [15, 17], "nattapat": 0, "jatuwong": 0, "63340500011": 0, "paphada": 0, "prasongsuk": 0, "63340500033": 0, "sorapa": 0, "weerakul": 0, "63340500064": 0, "member": [0, 2], "226": [7, 12], "022": [7, 12], "463": [8, 12], "783": 12, "evalu": 17, "lovel": 17, "consist": 17, "toler": 17, "effici": 17, "turn": 17, "frame": 7, "cm": 17, "40": [2, 17], "50": 17, "take": 17, "compar": 17, "actual": [7, 16, 17], "travel": 17, "give": [5, 17], "maximum": [4, 16, 17], "765": 17, "within": [8, 16, 17], "displac": 17, "17": [4, 17], "028": 17, "trial": 17, "error": [7, 17], "13": 17, "053": 17, "918": 17, "839": 17, "12": [4, 17], "218": 17, "411": 17, "18": 17, "399": 17, "068": 17, "633": 17, "771": 17, "512": 17, "618": 17, "26": 17, "900": 17, "728": 17, "835": 17, "27": 17, "147": 17, "358": 17, "25": 17, "806": 17, "171": 17, "651": 17, "39": 17, "764": 17, "36": [2, 17], "811": 17, "37": 17, "807": 17, "41": 17, "850": 17, "38": [2, 17], "883": 17, "33": 17, "653": 17, "776": 17, "319": 17, "260": 17, "47": 17, "996": 17, "44": 17, "945": 17, "46": 17, "897": 17, "51": 17, "780": 17, "071": 17, "53": 17, "822": 17, "45": 17, "139": 17, "887": 17, "62": 17, "130": 17, "422": 17, "58": 17, "491": 17, "030": 17, "63": 17, "659": 17, "65": 17, "620": 17, "64": [2, 5, 17], "561": 17, "032": 17, "67": 17, "626": 17, "16": [7, 17], "301": 17, "666": 17, "385": 17, "109": 17, "824": 17, "326": 17, "754": 17, "798": 17, "759": 17, "148": 17, "648": 17, "634": 17, "608": 17, "23": 17, "975": 17, "009": 17, "571": 17, "895": 17, "896": 17, "131": 17, "34": [2, 17], "045": 17, "269": 17, "018": 17, "849": 17, "198": 17, "445": 17, "058": 17, "816": 17, "092": [7, 17], "120": 17, "389": 17, "928": 17, "554": 17, "872": 17, "679": 17, "987": 17, "49": 17, "983": 17, "452": 17, "673": 17, "292": 17, "718": 17, "59": 17, "240": 17, "934": 17, "685": 17, "54": 17, "303": 17, "012": 17, "778": 17, "sinc": 16, "circuit": [5, 16], "pcb": 16, "easili": 16, "affect": 16, "interfer": 16, "As": 16, "possibl": 16, "mhz": [7, 16], "khz": [7, 16], "read": [2, 4, 5, 7, 8, 16], "resolut": 16, "36621": 16, "obtain": 16, "larg": 16, "oper": [2, 5, 16], "poll": 16, "function": [2, 4, 5, 16], "chanc": 16, "caus": 16, "stuck": 16, "infinit": 16, "loop": [2, 16], "timeout": [7, 16], "doe": 16, "ramp": 16, "red": 16, "fault": 16, "indic": 16, "suspend": 16, "less": [2, 16], "minut": 16, "back": 16, "increas": [4, 16], "freez": 16, "other": [2, 5, 16], "fail": [2, 4, 16], "were": 16, "0878": 16, "puls": [7, 16], "howev": 16, "cut": 16, "off": 16, "temporari": 16, "veri": 16, "variabl": [2, 16], "size": [5, 16], "creat": [8, 16], "To": [2, 4, 5, 16], "necessari": 16, "remov": 16, "constant": 16, "chang": [2, 16], "If": [2, 16], "befor": 16, "improv": 16, "withstand": 16, "nois": 16, "shield": 16, "cabl": [5, 16], "support": [2, 16], "instead": [5, 16], "diagnosi": 16, "overload": 16, "under": 16, "over": 16, "fall": 16, "overheat": 16, "heart": 16, "beat": 16, "occur": 16, "handl": 16, "appropri": [5, 16], "mayb": 16, "For": [2, 7, 16], "r": [5, 16], "matric": 16, "Or": 16, "mai": 16, "consid": 16, "togeth": 16, "equat": 16, "conduct": 16, "experi": [4, 16], "find": [2, 16], "gripper": 2, "tool": 2, "optim": 2, "variou": 2, "emanu": [2, 5], "roboti": [2, 5], "doc": [2, 5], "dynamixel_wizard2": 2, "kit": 2, "packet": 2, "dynamixel_sdk": 2, "joint": 2, "mode": [2, 7], "enabl": [2, 7, 8], "tabl": [2, 5], "address": [2, 5, 7], "addr_mx_torque_en": 2, "model": 2, "addr_mx_goal_posit": 2, "addr_mx_present_posit": 2, "addr_mx_curr": 2, "68": 2, "addr_mx_torqe_limit": 2, "addr_mx_present_spe": 2, "addr_mx_torqe_control_en": 2, "70": 2, "addr_mx_goal_torqu": 2, "71": 2, "addr_moving_spe": 2, "addr_mx_present_load": 2, "boolean": 2, "input": 2, "true": 2, "detect": [2, 7], "stop": [2, 7], "mx64": 2, "reach": 2, "800": [2, 4], "3600": [2, 4], "blob": 2, "python": 2, "read_write_for_nod": 2, "dxl": [2, 5], "mx": [2, 5], "version": 2, "protocol_vers": 2, "default": 2, "dxl_id": 2, "id": [2, 7], "57600": 2, "devicenam": 2, "ttyusb0": 2, "being": 2, "ex": 2, "window": 2, "com1": 2, "linux": 2, "mac": 2, "tty": 2, "usbseri": 2, "part": [2, 4, 5, 16], "torque_en": 2, "torque_dis": 2, "disabl": 2, "dxl_minimum_position_valu": 2, "dxl_maximum_position_valu": 2, "2900": 2, "note": 2, "would": 2, "out": [2, 8], "movabl": 2, "e": 2, "about": 2, "dxl_moving_status_threshold": 2, "statu": 2, "threshold": 2, "dxl_cw": 2, "dxl_ccw": 2, "dxl_torqe_stop": 2, "dxl_": 2, "dxl_limit": 2, "stack": 2, "count": 2, "start": [2, 4, 8], "depend": 2, "situat": 2, "datasheet": [2, 5, 7], "dxl_ccw_cw": 2, "direct": 2, "initi": [2, 8], "porthandl": 2, "instanc": 2, "porthandlerlinux": 2, "porthandlerwindow": 2, "packethandl": 2, "protocol1packethandl": 2, "protocol2packethandl": 2, "packhandl": 2, "get_taget_callback": 2, "dxl_present_load": 2, "dxl_comm_result": 2, "dxl_error": 2, "read2bytetxrx": 2, "dxl_present_posit": 2, "03f": 2, "write4bytetxrx": 2, "write1bytetxrx": 2, "break": [2, 7], "elif": 2, "80": [2, 4], "ab": 2, "condit": 2, "second": 2, "And": 2, "last": 2, "smaller": 2, "get_present_data": 2, "dxl_present_spe": 2, "114": 2, "dxl_present_curr": 2, "amp": 2, "2048": 2, "main_set": 2, "try": 2, "openport": 2, "succeed": 2, "except": 2, "press": 2, "getch": 2, "quit": 2, "setbaudr": 2, "comm_success": 2, "gettxrxresult": 2, "getrxpacketerror": 2, "been": [2, 16], "successfulli": 2, "dxl_limit_result": 2, "write2bytetxrx": 2, "limit": 2, "torq": 2, "complet": 2, "buadrat": 2, "previous": 2, "Then": 2, "pringl": 4, "box": 4, "min": 4, "grab": 4, "show": 4, "graph": 4, "goe": [4, 16], "down": [4, 7], "84": 4, "increment": 4, "pass": 4, "85": 4, "90": 4, "95": 4, "mini": 4, "soccer": 4, "ball": 4, "lunch": 4, "cereal": 4, "fork": 4, "screw": 4, "bolt": 4, "hex": 4, "wrench": 4, "duct": 4, "tape": 4, "whisk": 4, "shirt": 4, "grip": 4, "still": 4, "problem": 4, "mechan": [4, 5, 16], "64r": 5, "enough": 5, "drive": 5, "therefor": [5, 16], "pc": 5, "enclos": 5, "pin": [5, 8], "485": 5, "connector": 5, "extern": 5, "suppli": 5, "12v": 5, "fsr402": 5, "By": 5, "divid": 5, "resist": 5, "nucleo": 5, "l412kb": 5, "small": 5, "adc": 5, "channel": 5, "doesn": 5, "fragil": 5, "wrong": 16, "test": 16, "fix": 16, "retaken": 16, "vin": 8, "3v": 8, "gnd": 8, "ground": 8, "sda": 8, "scl": 8, "directli": 8, "work": [7, 8], "librari": 8, "download": 8, "clone": 8, "bno055_stm32": 8, "ivyknob": 8, "select": 8, "tim1": 8, "i2c1": 8, "ioc": 8, "place": 8, "folder": 8, "inc": 8, "written": 8, "come": 8, "build": 8, "upload": 8, "continu": 8, "rightmotor_testcommand": 7, "clear": 7, "tx": 7, "txdata_clear": 7, "txdata1": 7, "0x19": 7, "0x3f": 7, "hal_fdcan_addmessagetotxfifoq": 7, "hfdcan1": 7, "txheader1": 7, "hal_ok": 7, "error_handl": 7, "wait": 7, "until": 7, "rx": 7, "txwritemsg1_isreturn": 7, "bothmotor_set_speedmod": 7, "initial_right_speed_rpm": 7, "initial_left_speed_rpm": 7, "acc_tim": 7, "dec_tim": 7, "txdata2": 7, "right": 7, "0x2f": 7, "left": 7, "hfdcan2": 7, "txheader2": 7, "deceler": 7, "0x13": 7, "100m": 7, "motor_set_targetspe": 7, "bothmotor_en": 7, "bothmotor_emergencybrak": 7, "right_speed_rpm": 7, "left_speed_rpm": 7, "target": 7, "0x11": 7, "uint32_t": 7, "set_valu": 7, "8192": 7, "3000": 7, "revers": 7, "two": 7, "complement": 7, "0xff": 7, "byte4": 7, "byte5": 7, "byte6": 7, "byte7": 7, "0x10": 7, "0x1f": 7, "bothmotor_releas": 7, "0x0f": 7, "emerg": 7, "0x30": 7, "bothmotor_get_curr": 7, "0xdc": 7, "0xe2": 7, "txwritemsg2_isreturn": 7, "uint64_t": 7, "bothmotor_get_spe": 7, "0xe4": 7, "bothmotor_get_posit": 7, "0xe8": 7, "bno055_vector_t": 8, "v": 8, "bno055_getvectorquaternion": 8, "qw": 8, "qx": 8, "qy": 8, "qz": 8, "bno055_getvectorlinearaccel": 8, "ax": 8, "ai": 8, "az": 8, "bno055_getvectorgyroscop": 8, "gx": 8, "gy": 8, "gz": 8, "bno055_assigni2c": 8, "hi2c1": 8, "bno055_setup": 8, "bno055_setoperationmodendof": 8, "739": 8, "833": 8, "741": 8, "696": 8, "980": 8, "135": 7, "format": 7, "classic": 7, "cam": [], "retransmiss": 7, "length": 7, "byte": 7, "0x22": 7, "mask": 7, "filter": 7, "fdcan_filtertypedef": 7, "sfilterconfig": 7, "idtyp": 7, "fdcan_standard_id": 7, "filterindex": 7, "filtertyp": 7, "fdcan_filter_mask": 7, "filterconfig": 7, "fdcan_filter_to_rxfifo0": 7, "filterid1": 7, "filterid2": 7, "0x7ff": 7, "accept": 7, "messageid": 7, "match": 7, "exactli": 7, "rxbufferindex": 7, "fdcan_filter_to_rxfifo1": 7, "kicad": 7, "schemat": 7, "transceiv": 7, "where": 7, "act": 7, "compos": 7, "host": 7, "veroalfa": 0, "canva": 0}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"welcom": [], "mbse": 0, "2022": 0, "1": [0, 14], "firmwar": [0, 16], "team": 0, "": [], "document": 0, "indic": [], "tabl": [], "content": [], "hardwar": [5, 14], "us": 14, "refer": [], "file": [], "dummi": [], "2": 14, "just": [], "kei": [], "goal": [], "option": [], "sub1": [], "sub2": [], "sub3": [], "comparison": [], "stm32": [7, 12], "hub": [6, 7, 16], "motor": [6, 7, 16], "driver": [6, 7], "inerti": [], "measur": [], "unit": [], "imu": [8, 9, 16], "microcontrol": [5, 11, 14, 16, 20], "ros2": [12, 13, 14, 15, 16], "packag": [1, 14, 20], "manipul": [], "mobil": 0, "robot": 0, "system": 0, "architectur": 0, "forward": 3, "kinemat": [3, 10, 19], "interfac": [7, 8, 13, 16, 20], "invers": 10, "wheel": [16, 17, 18, 19], "odometri": [16, 17, 18], "comput": 18, "veloc": [3, 10, 16, 19], "estim": [16, 19], "connect": [7, 8], "subsystem": 17, "sensor": 9, "calibr": [1, 14, 15], "setup": [2, 5, 14, 20], "step": 15, "open": [14, 15], "node": [15, 20], "xicro": [14, 15, 20], "link": 0, "nucleo": [8, 11], "h745zi": [8, 11], "q": [8, 11], "bno055": [8, 9], "robocup": 0, "home": 0, "requir": 0, "gripper": [0, 4, 5, 16], "why": 11, "stm32h745zi": 11, "zllg65asm250": 6, "4096": 6, "v2": 6, "0": 6, "zlac706": 6, "can": [6, 7], "member": [], "kalman": 19, "filter": 19, "algorithm": [2, 19], "base": 19, "model": 19, "implement": [3, 8, 10, 13, 18, 19], "m7": [3, 8, 10, 18, 19], "runtim": [3, 7, 8, 10, 13, 18, 19], "core": [3, 8, 10, 13, 18, 19], "function": 7, "test": [3, 4, 7, 8, 10, 13, 18, 19], "covari": 3, "matrix": [3, 19], "2d": 3, "twist": [3, 15], "updat": 18, "m4": 13, "creat": 20, "custom": 20, "messag": [15, 20], "paramet": 20, "setup_xicro": 20, "yaml": 20, "librari": [14, 20], "navig": [15, 20], "publish": [12, 15, 20], "instal": 14, "python": 14, "clone": 14, "from": 14, "github": 14, "3": 14, "give": 14, "permiss": 14, "all": 14, "script": 14, "both": 14, "4": 14, "build": 14, "workspac": 14, "colcon": 14, "5": 14, "start": 14, "find": [4, 14], "devic": [5, 14], "dev": 14, "path": 14, "usb": 14, "port": 14, "subscrib": 1, "server": 1, "teleop": 15, "keyboard": 15, "process": 12, "time": 12, "summari": [16, 19], "relat": 17, "object": [4, 17], "procedur": 17, "result": 17, "x": 17, "axi": 17, "odom": 17, "frame": 17, "analysi": 17, "y": 17, "problem": 16, "solut": 16, "suggest": 16, "futur": 16, "develop": 16, "output": 19, "control": [2, 4], "softwar": 2, "dynamixel": [2, 5], "wizard": 2, "sdk": 2, "code": 2, "overview": 2, "descript": 2, "appropri": 4, "forc": [4, 5], "an": 4, "other": 4, "select": 5, "u2d2": 5, "sens": 5, "resistor": 5, "prepar": 8, "befor": 8, "stm32cubeid": 8, "fdcan": 7, "specif": 7, "bu": 7, "commun": 7}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 57}, "alltitles": {"IMU Sensor": [[9, "imu-sensor"]], "BNO055": [[9, "bno055"]], "Microcontroller": [[11, "microcontroller"]], "Why STM32H745ZI?": [[11, "why-stm32h745zi"]], "NUCLEO-H745ZI-Q": [[11, "nucleo-h745zi-q"]], "ROS2 Setup": [[14, "ros2-setup"]], "Calibration and Xicro Installation": [[14, "calibration-and-xicro-installation"]], "1. Install python library": [[14, "install-python-library"]], "2. Clone package from Github": [[14, "clone-package-from-github"]], "3. Give permission to all python scripts in both packages": [[14, "give-permission-to-all-python-scripts-in-both-packages"]], "4. Build the workspace with colcon": [[14, "build-the-workspace-with-colcon"]], "5. Start using xicro and calibration scripts": [[14, "start-using-xicro-and-calibration-scripts"]], "Hardware Setup": [[14, "hardware-setup"]], "1. Find microcontroller device dev path": [[14, "find-microcontroller-device-dev-path"]], "2. Open microcontroller usb port": [[14, "open-microcontroller-usb-port"]], "Xicro Package": [[20, "xicro-package"]], "Create custom message for microcontroller interface": [[20, "create-custom-message-for-microcontroller-interface"]], "Setup parameter in setup_xicro.yaml": [[20, "setup-parameter-in-setup-xicro-yaml"]], "Create xicro library for microcontroller": [[20, "create-xicro-library-for-microcontroller"]], "Create xicro node": [[20, "create-xicro-node"]], "Create navigation message publisher node": [[20, "create-navigation-message-publisher-node"]], "Calibration Package": [[1, "calibration-package"]], "Calibration subscriber": [[1, "calibration-subscriber"]], "Calibration server": [[1, "calibration-server"]], "Steps to open ROS2 nodes": [[15, "steps-to-open-ros2-nodes"]], "Open Xicro node": [[15, "open-xicro-node"]], "Open Calibration node": [[15, "open-calibration-node"]], "Open Navigation message publisher node": [[15, "open-navigation-message-publisher-node"]], "Open Teleop twist keyboard node": [[15, "open-teleop-twist-keyboard-node"]], "Process Timing": [[12, "process-timing"]], "STM32 Process Timing": [[12, "stm32-process-timing"]], "ROS2 Publish Timing": [[12, "ros2-publish-timing"]], "Wheel Odometry": [[17, "wheel-odometry"], [16, "wheel-odometry"]], "Related Subsystem": [[17, "related-subsystem"]], "Objective": [[17, "objective"]], "Procedure": [[17, "procedure"]], "Results": [[17, "results"]], "X-axis of odom frame": [[17, "x-axis-of-odom-frame"]], "X-axis analysis": [[17, "x-axis-analysis"]], "Y-axis of odom frame": [[17, "y-axis-of-odom-frame"]], "Y-axis analysis": [[17, "y-axis-analysis"]], "Hub Motor and Driver": [[6, "hub-motor-and-driver"]], "ZLLG65ASM250-4096 V2.0": [[6, "zllg65asm250-4096-v2-0"]], "ZLAC706-CAN": [[6, "zlac706-can"]], "Runtime Test": [[3, "runtime-test"], [10, "runtime-test"], [19, "runtime-test"], [18, "runtime-test"], [13, "runtime-test"], [8, "runtime-test"], [7, "runtime-test"]], "Implemention (Core M7)": [[3, "implemention-core-m7"], [10, "implemention-core-m7"], [19, "implemention-core-m7"], [18, "implemention-core-m7"], [8, "implemention-core-m7"]], "Forward Kinematics": [[3, "forward-kinematics"]], "Forward Velocity Kinematics": [[3, "forward-velocity-kinematics"]], "Covariance Matrix of 2D-Twist": [[3, "covariance-matrix-of-2d-twist"]], "Inverse Kinematics": [[10, "inverse-kinematics"]], "Inverse Velocity Kinematics": [[10, "inverse-velocity-kinematics"]], "Wheel Velocity Estimation": [[19, "wheel-velocity-estimation"], [16, "wheel-velocity-estimation"]], "Kalman Filter Algorithms": [[19, "kalman-filter-algorithms"]], "Kinematics Base Model": [[19, "kinematics-base-model"]], "Matrix Summary": [[19, "matrix-summary"]], "Kalman Output": [[19, "kalman-output"]], "Wheel Odometry Computation": [[18, "wheel-odometry-computation"]], "Odometry Update": [[18, "odometry-update"]], "ROS2 Interface": [[13, "ros2-interface"]], "Implemention (Core M4)": [[13, "implemention-core-m4"]], "Hub Motor Interface": [[16, "hub-motor-interface"], [16, "id1"], [7, "hub-motor-interface"]], "IMU Interface": [[16, "imu-interface"], [8, "imu-interface"]], "Gripper": [[16, "gripper"], [16, "id2"], [4, "gripper"]], "Firmware Summary": [[16, "firmware-summary"]], "Problems and Solutions": [[16, "problems-and-solutions"]], "Microcontroller-ROS2 Interface": [[16, "microcontroller-ros2-interface"]], "Suggestion for Future Development": [[16, "suggestion-for-future-development"]], "Control Algorithms": [[2, "control-algorithms"]], "Software Setup": [[2, "software-setup"]], "Dynamixel wizard": [[2, "dynamixel-wizard"]], "Dynamixel SDK": [[2, "dynamixel-sdk"]], "Code Overview": [[2, "code-overview"]], "Code Description": [[2, "code-description"]], "Finding a appropriate force for control gripper": [[4, "finding-a-appropriate-force-for-control-gripper"]], "Testing an appropriate force with other object": [[4, "testing-an-appropriate-force-with-other-object"]], "Hardware Gripper": [[5, "hardware-gripper"]], "Dynamixel Selection and U2D2": [[5, "dynamixel-selection-and-u2d2"]], "Device Setup": [[5, "device-setup"]], "Force Sensing Resistor and Microcontroller": [[5, "force-sensing-resistor-and-microcontroller"]], "Connected to NUCLEO-H745ZI-Q": [[8, "connected-to-nucleo-h745zi-q"]], "Prepare before STM32CubeIDE": [[8, "prepare-before-stm32cubeide"]], "BNO055 with STM32CubeIDE": [[8, "bno055-with-stm32cubeide"]], "CAN Bus Communication": [[7, "can-bus-communication"]], "Hub Motor Driver Connection": [[7, "hub-motor-driver-connection"]], "STM32 FDCAN Specification": [[7, "stm32-fdcan-specification"]], "Hub Motor Function": [[7, "hub-motor-function"]], "MBSE-2022-1/Firmware-Team Documentation": [[0, "mbse-2022-1-firmware-team-documentation"]], "RoboCup@Home Requirement": [[0, "robocup-home-requirement"]], "Mobile Robot Requirement": [[0, "mobile-robot-requirement"]], "Gripper Requirement": [[0, "gripper-requirement"]], "System Architecture": [[0, "system-architecture"]], "Links": [[0, "links"]]}, "indexentries": {}})